<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="温故而知新"><title>golang函数 | 怪叔叔的博客</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">golang函数</h1><a id="logo" href="/.">怪叔叔的博客</a><p class="description">攀峰之高险，岂有崖巅。搏海之明辉，何来彼岸。前进不止，奋斗不息。</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">golang函数</h1><div class="post-meta">Jan 2, 2019</div><div class="post-content"><h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><p>函数是基本的代码块，用来执行一个任务。<br>在Go语言中，函数的基本组成为:关键字func、函数名、参数列表、返回值、函数体和返回语句。</p>
<p>函数规则：小写字母开头的函数，只在本包内可见，大些开头的函数才能被其他包使用。</p>
<h4 id="函数的定义"><a href="#函数的定义" class="headerlink" title="函数的定义"></a>函数的定义</h4><p>Go语言函数定义格式如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">func function_name( [parameter list] ) [return_types] &#123;</span><br><span class="line">   函数体</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">### 函数定义解析</span><br><span class="line">- func：函数由 func 开始声明</span><br><span class="line">- function_name：函数名称，函数名和参数列表一起构成了函数签名</span><br><span class="line">- parameter list：参数列表，参数就像一个占位符，当函数被调用时，你可以将值传递给参数，这个值被称为实际参数。参数列表指定的是参数类型、顺序、及参数个数。参数是可选的，也就是说函数也可以不包含参数。</span><br><span class="line">- return_types：返回类型，函数返回一列值。return_types 是该列值的数据类型。有些功能不需要返回值，这种情况下 return_types 不是必须的。</span><br><span class="line">- 函数体：函数定义的代码集合</span><br></pre></td></tr></table></figure></p>
<h4 id="变量声明实例"><a href="#变量声明实例" class="headerlink" title="变量声明实例"></a>变量声明实例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/* 函数返回两个数的最大值 */</span><br><span class="line">func max(num1, num2 int) int &#123;</span><br><span class="line">   /* 声明局部变量 */</span><br><span class="line">   var result int</span><br><span class="line"></span><br><span class="line">   if (num1 &gt; num2) &#123;</span><br><span class="line">      result = num1</span><br><span class="line">   &#125; else &#123;</span><br><span class="line">      result = num2</span><br><span class="line">   &#125;</span><br><span class="line">   return result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="函数调用"><a href="#函数调用" class="headerlink" title="函数调用"></a>函数调用</h4><p>当创建函数时，你定义了函数需要做什么，通过调用该函数来执行指定任务。调用函数，向函数传递参数，并返回值，例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import &quot;fmt&quot;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	//定义局部变量</span><br><span class="line">	var a int = 100</span><br><span class="line">	var b int = 200</span><br><span class="line">	var ret int</span><br><span class="line"></span><br><span class="line">	//调用函数并且返回最大值</span><br><span class="line">	ret = max(a, b)</span><br><span class="line">	fmt.Printf(&quot;最大值：%d\n&quot;, ret)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func max(num1, num2 int) int &#123;</span><br><span class="line">	/*声明局部变量*/</span><br><span class="line">	var result int</span><br><span class="line">	if num1 &gt; num2 &#123;</span><br><span class="line">		result = num1</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		result = num2</span><br><span class="line">	&#125;</span><br><span class="line">	return result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="函数返回多个值"><a href="#函数返回多个值" class="headerlink" title="函数返回多个值"></a>函数返回多个值</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import &quot;fmt&quot;</span><br><span class="line"></span><br><span class="line">func helloworld(x, y string) (string, string) &#123;</span><br><span class="line">	return y, x</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">func main() &#123;</span><br><span class="line">	a, b := helloworld(&quot;world&quot;, &quot;hello&quot;)</span><br><span class="line">	fmt.Println(a, b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h4><p>Go语言中,函数能像普通变量一样被传递或者使用，Go语言支持随时在代码里制定匿名函数。<br>匿名函数由一个不带匿名函数和函数体组成。\<br>Go语言的函数其实就是闭包 \<br>定义：没有函数名的函数\<br>作用：在go语言中目前了解的作用就是用于构成闭包。\<br>使用方法及其原理请参考：<a href="http://www.cnblogs.com/chenxianbin89/archive/2010/01/28/1658392.html" target="_blank" rel="noopener">http://www.cnblogs.com/chenxianbin89/archive/2010/01/28/1658392.html</a></p>
<p>使用举例 \</p>
<ol>
<li><p>不带参数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import &quot;fmt&quot;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	a := func() &#123;</span><br><span class="line">		fmt.Println(&quot;hellow&quot;)</span><br><span class="line">	&#125;</span><br><span class="line">	a() //返回：hellow</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>带参数的参数写到()里面</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import &quot;fmt&quot;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	b := func(arg int) &#123;</span><br><span class="line">		fmt.Println(arg)</span><br><span class="line">	&#125;</span><br><span class="line">	b(2) //输出：2</span><br><span class="line">	(func(arg int) &#123;</span><br><span class="line">		fmt.Println(arg)</span><br><span class="line">	&#125;)(3) //输出: 3</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>带返回值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import &quot;fmt&quot;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	c := func() int &#123;</span><br><span class="line">		fmt.Println(3)</span><br><span class="line">		return 5</span><br><span class="line">	&#125;</span><br><span class="line">	d := c() //打印输出3,并将5赋值给d</span><br><span class="line">	fmt.Println(d)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="Go闭包"><a href="#Go闭包" class="headerlink" title="Go闭包"></a>Go闭包</h3><h6 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h6><p>闭包是可以包含自由（未绑定到特定对象）变量的代码块，这些变量不在这个代码块内或者任何全局上下文中定义，而是在定义代码块的环境中定义。要执行的代码块（由于自由变量包含<br>在代码块中，所以这些自由变量以及它们引用的对象没有被释放）为自由变量提供绑定的计算环境（作用域）。</p>
<h6 id="闭包的价值"><a href="#闭包的价值" class="headerlink" title="闭包的价值"></a>闭包的价值</h6><p>闭包的价值在于可以作为函数对象或者匿名函数，对于类型系统而言，这意味着不仅要表示数据还要表示代码。支持闭包的多数语言都将函数作为第一级对象，就是说这些函数可以存储到<br>变量中作为参数传递给其他函数，最重要的是能够被函数动态创建和返回。</p>
<h6 id="Go语言中的闭包"><a href="#Go语言中的闭包" class="headerlink" title="Go语言中的闭包"></a>Go语言中的闭包</h6><p>Go语言中的闭包同样也会引用到函数外的变量。闭包的实现确保只要闭包还被使用，那么被闭包引用的变量会一直存在。<br><code>因为</code>把返回函数赋值一个变量,虽然函数在执行完一瞬间会销毁其执行环境,但是如果有闭包的话，闭包会保存外部函数的活动对象(变量)，<br>所以如果不把闭包的饮用消除掉，闭包会一直存在内存中，垃圾收集器不会销毁闭包占用的内存。\<br>—-来自知乎回答<a href="http://www.zhihu.com/question/34649602" target="_blank" rel="noopener">http://www.zhihu.com/question/34649602</a></p>
<p>例:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import &quot;fmt&quot;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	var a int = 6</span><br><span class="line">	c := func() func() &#123;</span><br><span class="line">		var b int = 10</span><br><span class="line">		return func() &#123;</span><br><span class="line">			fmt.Printf(&quot;b,a: %d, %d\n&quot;, b, a)</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;() //末尾括号表明匿名函数被调用，并且将返回的函数指针赋给变量c</span><br><span class="line">	c()</span><br><span class="line">	a *= 2</span><br><span class="line">	c()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">执行结果：</span><br><span class="line">b,a: 10,6</span><br><span class="line">b,a: 10,12</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>
<p>变量c执行的闭包函数引用了局部变量a,b,但是变量b的值被隔离,在闭包外不能被修改。<br>改变a的值以后，再次调用a发现值是被修改过的。在变量c指向的闭包函数中，只有内部<br>的匿名函数才会访问变量b,而无法通过其他途径访问到。因此保证了b的安全性。</p>
</div><div class="tags"><a href="/tags/Golang/">Golang</a></div><div class="post-nav"><a class="pre" href="/2019/01/03/docker-ce安装/">docker-ce安装</a><a class="next" href="/2019/01/02/docker环境下部署Open-Falcon/">docker环境下部署Open-Falcon</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://dingbingbing.top"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/ELK/" style="font-size: 15px;">ELK</a> <a href="/tags/Golang/" style="font-size: 15px;">Golang</a> <a href="/tags/交换机/" style="font-size: 15px;">交换机</a> <a href="/tags/tensorflow/" style="font-size: 15px;">tensorflow</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/Open-Falcon/" style="font-size: 15px;">Open-Falcon</a> <a href="/tags/salt/" style="font-size: 15px;">salt</a> <a href="/tags/vim/" style="font-size: 15px;">vim</a> <a href="/tags/IaaS/" style="font-size: 15px;">IaaS</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/01/24/Go错误处理/">Go错误处理</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/24/开源DNS管理系统OpenDnsdb/">开源DNS管理系统OpenDnsdb</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/23/Go语言开发必备的5大开源工具/">Go语言开发必备的5大开源工具</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/22/go项目积累/">go项目积累</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/22/Goroutine并发数控制/">Goroutine并发数控制</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/11/Visual-Studio-code中文设置/">Visual Studio code中午设置</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/09/MB-Bps-bps-pps是什么意思-区别是什么/">MB Bps bps pps是什么意思 区别是什么</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/08/go-admin体验/">go-admin体验</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/04/docker上部署tensorflow-serving/">docker上部署tensorflow-serving</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/03/docker-ce安装/">docker-ce安装</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">怪叔叔的博客.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>